(()=>{var e,t=document.querySelector('meta[name="csrf-token"]').getAttribute("content"),o=(e={list:function(){document.querySelectorAll(".scomments-item-images-toogle").forEach((function(e){e.addEventListener("click",(function(e){e.preventDefault();var o=this.getAttribute("data-id"),n=this.parentNode.querySelector(".scomments-item-images"),s=new XMLHttpRequest;s.open("POST","/post/comment",!0),s.setRequestHeader("X-CSRF-TOKEN",t);var a=new FormData;a.append("task","images"),a.append("id",o),s.onload=function(){200===s.status&&(n.innerHTML="",JSON.parse(s.responseText).forEach((function(e){var t=document.createElement("a");t.href="/images/comments/"+e.original,t.className="simplemodal",t.setAttribute("data-width","800"),t.setAttribute("data-height","500"),t.innerHTML='<img src="/images/comments/'+e.thumb+'">',n.appendChild(t)})),"none"===n.style.display||""===n.style.display?n.style.display="block":n.style.display="none")},s.send(a)}))})),document.querySelectorAll(".scomments-vote a").forEach((function(e){e.addEventListener("click",(function(e){e.preventDefault();var o=this.parentNode,n=this.getAttribute("data-id"),s=this.getAttribute("data-value"),a=new XMLHttpRequest;a.open("POST","/post/comment",!0),a.setRequestHeader("X-CSRF-TOKEN",t);var r=new FormData;r.append("task","vote"),r.append("value",s),r.append("id",n),a.onload=function(){if(200===a.status){var e=JSON.parse(a.responseText);o.innerHTML=e.msg}},a.send(r)}))})),document.querySelectorAll(".scomments-reply").forEach((function(e){e.addEventListener("click",(function(e){e.preventDefault();var t=" "+this.closest(".comments-content").querySelector(".scomments-text").innerHTML.replace(/<blockquote>(.*)<\/blockquote>/gm,"").substring(0,150)+"...",o=this.getAttribute("href").replace(/\?num=/g,"#"),n=document.getElementById("description");t=t.replace(/(\r\n|\n|\r|<br>|<br \/>|)/gm,""),n.value="<blockquote>"+o+t+"</blockquote>",window.scrollTo({top:n.offsetTop,behavior:"smooth"})}))})),document.querySelectorAll(".checked_comm_div input").forEach((function(e){e.addEventListener("click",(function(e){var o=document.querySelector("input[name='radio']:checked").value,n=document.querySelector("input[name='object_id']").value,s=document.querySelector("input[name='object_group']").value,a=document.querySelector(".scomments-all"),r=document.getElementById("count_good"),c=document.getElementById("count_neutrally"),l=document.getElementById("count_bad"),d="";"good"===o?(r.style.fontWeight="bold",r.style.color="#8af78f",r.style.textShadow="black 1px 1px 1px, green 0px 0px 0em",l.style.fontWeight="",l.style.color="",c.style.fontWeight="",d="üòÄ"):"neutrally"===o?(c.style.fontWeight="bold",r.style.fontWeight="",r.style.textShadow="",r.style.color="",l.style.fontWeight="",l.style.color="",d="üòê"):"bad"===o?(l.style.fontWeight="bold",l.style.color="#f44336",r.style.fontWeight="",r.style.textShadow="",r.style.color="",c.style.fontWeight="",d="üò°"):(r.style.fontWeight="",r.style.color="",r.style.textShadow="",c.style.fontWeight="",l.style.fontWeight="",l.style.color="",d="#");var i=new XMLHttpRequest;i.open("POST","/post/comment",!0),i.setRequestHeader("X-CSRF-TOKEN",t);var m=new FormData;m.append("task","votes"),m.append("votes",o),m.append("objectid",n),m.append("objectgroup",s),i.onload=function(){if(200===i.status){for(var e=JSON.parse(i.responseText),t="",o=0;o<e.length;o++){var n=void 0,s=void 0;Number(e[o].rate)>=4?(n="good_comm",s="–•–æ—Ä–æ—à–∏–π –æ—Ç–∑—ã–≤"):3===Number(e[o].rate)||0===Number(e[o].rate)?(n="neutrally_comm",s="–ù–µ–π—Ç—Ä–∞–ª—å–Ω—ã–π –æ—Ç–∑—ã–≤"):(n="bad_comm",s="–ü–ª–æ—Ö–æ–π –æ—Ç–∑—ã–≤"),t+='<div class="scomments-item '+n+'"'+(0===Number(e[o].status)?'style="background-color: #ffebeb;"':"")+">",e[o].registered?t+='<div class="comments-avatar-registered" title="'+s+'  –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"></div>':t+='<div class "comments-avatar-guest" title="'+s+'"></div>',t+='<div class="comments-content"><div class="scomments-title"><span class="scomments-vote"><a rel="nofollow" href="#" title="–°–æ–≥–ª–∞—Å–µ–Ω!" class="scomments-vote-good" data-id="'+e[o].id+'" data-value="up">–≠—Ç–æ –ø—Ä–∞–≤–¥–∞'+(e[o].isgood?"<span>"+e[o].isgood+"</span>":"")+'</a><a rel="nofollow" href="#" title="–ù–µ —Å–æ–≥–ª–∞—Å–µ–Ω!" class="scomments-vote-poor" data-id="'+e[o].id+'" data-value="down">–≠—Ç–æ –ª–æ–∂—å'+(e[o].ispoor?"<span>"+e[o].ispoor+"</span>":"")+'</a></span><div><a href="#scomment-'+e[o].id+'" name="scomment-'+e[o].id+'" id="scomment-'+e[o].id+'"> '+d+"</a>",e[o].user_name?t+='<span class="scomments-user-name" itemprop="author">'+e[o].user_name+"</span>":t+='<span class="scomments-guest-name" itemprop="author">'+e[o].guest_name+"</span>",t+='</div></div><div><span class="scomments-date" itemprop="datePublished" content="'+e[o].created+'">'+e[o].created+"</span>",e[o].country&&"unknown"!==e[o].country&&(t+='<span class="scomments-marker"></span><span class="scomments-country">'+e[o].country+"</span>"),t+='</div><div class="scomments-text" itemprop="reviewBody">'+e[o].description+"</div>",Number(e[o].mages)>0&&(t+='<a href="#" data-id="'+e[o].id+'" class="scomments-item-images-toogle">–ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–Ω–æ–µ —Ñ–æ—Ç–æ</a><div class="scomments-item-images"></div>'),t+="</div></div>"}document.querySelector("div.pagination").innerHTML="",a.innerHTML=t}},i.send(m)}))}))},form:function(){document.addEventListener("blur",(function(e){"email"===e.target.id&&(document.querySelector("label[for='email']").style.display="none")})),document.addEventListener("focus",(function(e){"email"===e.target.id&&(document.querySelector("label[for='email']").style.display="block")})),document.addEventListener("click",(function(e){"submit"===e.target.id&&(e.preventDefault(),e.stopPropagation(),document.querySelector("#myform").submit())})),document.addEventListener("change",(function(e){if(e.target.closest("#upload")&&"file"===e.target.type){e.preventDefault(),e.stopPropagation();var o=document.getElementById("file"),n=document.getElementById("slider"),s=document.getElementById("msg"),a=document.querySelector('input[name="attach"]'),r=new FormData;r.append("file",o.files[0]),r.append("task","addImage"),r.append("attach",a.value);var c=new XMLHttpRequest;c.open("POST","/post/comment",!0),c.setRequestHeader("X-CSRF-TOKEN",t),document.querySelector("#loader").innerHTML='<img src="/images/loader.gif">',document.querySelector("#loader").style.display="block",c.onload=function(){if(200===c.status){var e=JSON.parse(c.responseText);if(1===e.status){var t=document.createElement("div");t.className="row-slide",t.innerHTML='<a href="#" data-id="'+e.id+'" data-attach="'+e.attach+'" class="remove-slide"></a><img src="/images/comments/'+e.thumb+'">',n.appendChild(t)}else 2===e.status&&(s.className="msg-error",s.innerHTML=e.msg,s.style.display="block");document.getElementById("upload").reset(),document.querySelector("#loader").style.display="none"}},c.send(r)}}));var o=document.querySelector("#submit"),n=document.querySelector("#myform");o&&n&&o.addEventListener("click",(function(o){o.preventDefault(),o.stopPropagation();var s=new FormData(n),a=new XMLHttpRequest;a.open("POST","/post/comment",!0),a.setRequestHeader("X-CSRF-TOKEN",t),a.onreadystatechange=function(){4===a.readyState&&(document.querySelector("#msg").style.display="none",document.querySelector("#loader").innerHTML='<img src="/images/loader.gif">',document.querySelector("#loader").style.display="block")},a.onload=function(){if(200===a.status){var t=JSON.parse(a.responseText);if(1===t.status){var o=document.querySelector("#msg");o.className="msg-success",o.innerHTML=t.msg,o.style.display="block",n.reset(),n.style.display="none",document.querySelector("#slider").style.display="none",document.querySelector("#upload").style.display="none"}if(2===t.status){var s=document.querySelector("#msg");s.className="msg-error",s.innerHTML=t.msg,s.style.display="block"}document.querySelector("#loader").style.display="none",e.scroll()}},a.send(s)})),document.addEventListener("click",(function(e){if(e.target.classList.contains("remove-slide")){e.preventDefault(),document.querySelector("#msg").style.display="none";var o=e.target.parentNode,n=e.target.getAttribute("data-id"),s=(e.target.getAttribute("data-attach"),new XMLHttpRequest);s.open("POST","/post/comment",!0),s.setRequestHeader("X-CSRF-TOKEN",t);var a=new FormData;a.append("task","removeImage"),a.append("id_img",n),s.onreadystatechange=function(){4===s.readyState&&(document.querySelector("#percent").innerHTML="",document.querySelector("#percent").style.display="block")},s.onload=function(){if(200===s.status){var e=JSON.parse(s.responseText);if(1===e.status&&o.remove(),2===e.status){var t=document.querySelector("#msg");t.className="msg-error",t.innerHTML=e.msg,t.style.display="block"}document.querySelector("#percent").innerHTML="",document.querySelector("#percent").style.display="none"}},s.send(a)}}))},scroll:function(e){var t=document.querySelector(".scomments-anchor").offsetTop;window.scrollTo({top:t,behavior:"smooth"}),e&&e()}},{init:function(){e.list(),e.form()}});document.addEventListener("DOMContentLoaded",(function(){o.init()}))})();