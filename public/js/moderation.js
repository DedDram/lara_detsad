(()=>{var e=document.querySelector('meta[name="csrf-token"]').getAttribute("content");document.addEventListener("DOMContentLoaded",(function(){function t(t){t.preventDefault();var n=this.parentNode.querySelector(".scomments-control-msg"),o=this.getAttribute("data-task"),a=this.getAttribute("data-object-group"),s=this.getAttribute("data-object-id"),r=this.getAttribute("data-item-id");n.innerHTML='<img src="/images/loader.gif">',n.style.display="block";var c=new FormData;c.append("task",o),c.append("object_group",a),c.append("object_id",s),c.append("item_id",r);var d=new XMLHttpRequest;d.open("POST","/post/comment",!0),d.setRequestHeader("X-CSRF-TOKEN",e),d.onload=function(){if(200===d.status){var e=JSON.parse(d.responseText);n.innerHTML=e.msg}},d.send(c)}function n(t){t.preventDefault();var n=this.closest(".comments-content").querySelector(".scomments-text").innerHTML,o=this.parentNode.querySelector(".scomments-control-msg"),a=document.querySelector(".scomments-form"),s=this.getAttribute("data-item-id"),r=document.getElementById("description"),c=document.getElementById("task1"),d=document.getElementById("task2"),i=document.querySelector('#myform input[name="item_id"]');r.value=n;var m=document.getElementById("slider"),l=new XMLHttpRequest;l.open("POST","/post/comment",!0),l.setRequestHeader("X-CSRF-TOKEN",e),a.querySelector("header").textContent="Редактировать отзыв",c.value="edit",d.value="add",i.value=s;var u=new FormData;u.append("task","images"),u.append("id",s),l.onload=function(){if(200===l.status){var e=JSON.parse(l.responseText);o.innerHTML=e.msg,e.forEach((function(e){var t=document.createElement("div");t.className="row-slide",t.innerHTML='<a href="#" data-id="'+e.id+'" data-attach="'+e.attach+'" class="remove-slide"></a><img src="/images/comments/'+e.thumb+'">',m.appendChild(t)}))}},l.send(u),window.scrollTo({top:r.offsetTop,behavior:"smooth"})}document.querySelectorAll(".scomments-control-delete, .scomments-control-publish, .scomments-control-unpublish, .scomments-control-blacklist").forEach((function(e){e.addEventListener("click",t)})),document.querySelectorAll(".scomments-control-edit").forEach((function(e){e.addEventListener("click",n)}))}))})();