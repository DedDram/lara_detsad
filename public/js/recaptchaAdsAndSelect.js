document.addEventListener("DOMContentLoaded",(function(){var e,t=document.querySelector('meta[name="csrf-token"]').getAttribute("content"),n=!1;function o(n,o){var a=new XMLHttpRequest;a.open("POST","/ajax?task="+n+"&item_id="+o,!0),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),a.setRequestHeader("X-CSRF-TOKEN",t),a.timeout=5e3,a.onreadystatechange=function(){4===a.readyState&&(200===a.status?(e.closest(".show-popup-recaptcha").innerHTML=a.responseText,document.querySelector("#popup-recaptcha").style.display="none"):console.log("Error: detsad show "+n))},a.send()}window.onloadCallback=function(){document.querySelector(".show-popup-recaptcha")&&!n&&(grecaptcha.render("popup-recaptcha",{sitekey:"6LctRwwTAAAAAGTlZjgZPmyTKsJBPdM6UspsaVmw",callback:function(t){e&&o(e.getAttribute("data-task"),e.getAttribute("data-id"))}}),n=!0)},document.querySelectorAll(".show-popup-recaptcha a").forEach((function(t){t.addEventListener("click",(function(a){if(a.preventDefault(),e=t,n)o(e.getAttribute("data-task"),e.getAttribute("data-id"));else{var c=document.createElement("script");c.src="https://www.google.com/recaptcha/api.js?onload=onloadCallback&render=explicit",document.body.appendChild(c),c.onload=function(){var e=t.closest(".show-popup-recaptcha").getBoundingClientRect(),n=document.querySelector("#popup-recaptcha");n.style.display="block",n.style.position="fixed",n.style.top=e.bottom+"px",n.style.left=e.left+"px"}}}))})),document.getElementById("citySelect").addEventListener("change",(function(){var e=this.value,t=document.getElementById("mSelect");"4-moskva"===e&&(t.style.display="block")})),document.getElementById("search-obmen")&&document.getElementById("search-obmen").addEventListener("click",(function(e){e.preventDefault();var t=document.getElementById("citySelect"),n=document.getElementById("metroSelect"),o=t.options[t.selectedIndex].value,a=n.options[n.selectedIndex].value;if("0"!==o){var c="/obmen-mest/"+o;"0"!==a&&(c+="/"+a),console.log(location.href),location.href=c}})),document.getElementById("search-rabota")&&document.getElementById("search-rabota").addEventListener("click",(function(e){e.preventDefault();var t=document.getElementById("citySelect").value,n=document.getElementById("metroSelect").value,o=document.getElementById("type").value,a=document.getElementById("teachers").value,c=[],l="";"0"!==o&&c.push("type="+o),"0"!==a&&c.push("teachers="+a),c.length>0&&(l="/?"+c.join("&")),"0"!==t?location.href="0"!==n?"/rabota/"+t+"/"+n+l:"/rabota/"+t+l:c.length>0&&(location.href="/rabota"+l)}))}));